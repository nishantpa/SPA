<!-- 
	Swami Shreeji
	11 Nov 2017
	spa.html is a simple app that serves as an
		example/intro into the SPA world 
-->

<!doctype html>
<html>
<head>
	<title>SPA Ch1 section 1.2.2</title>
	<style type="text/css">
		/*Body tag fills the entire browser window and hides overflow*/
		body {
			width		: 100%;
			height		: 100%;
			overflow	: hidden;
			background-color  : #777;
		}

		/*Defines the container that holds all content of our SPA*/
		#spa {
			position	: absolute;
			top			: 8px;
			left		: 8px;
			bottom		: 8px;
			right		: 8px;
			border-radius  : 8px 8px 0 8px;
			background-color  : #fff;
		}

		/*Has the chat slider live on the bottom-right */
		.spa-slider {
			position	: absolute;
			bottom		: 0;
			right		: 2px;
			width		: 300px;
			height		: 16px;
			cursor		: pointer;
			border-radius  : 8px 0 0 0;
			background-color  : #f00;
		}
	</style>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>
  <script type="text/javascript">
  	/*jslint	     browser : true, continue : true,
  	  devel  : true, indent  : 2,    maxerr   : 50,
  	  newcap : true, nomen   : true, plusplus : true,
  	  regexp : true, sloppy  : true, vars     : true,
  	  white  : true
  	*/
  	/*globl jQuery */

  	// Module /spa/, which provides chat slider capability
  	var spa = (function ( $ ) {
  		// Module's scope variables
  		var
  			// setting constants
  		  configMap = {
  		  	extended_height   : 434,
  		  	extended_title    : 'Click to retract',
  		  	retracted_height  : 16,
  		  	retracted_title   : 'Click to extend',
  		  	template_html     : '<div class="spa-slider"><\/div>'
  		  },

  		  // Declare other module scope variables
  		  $chatSlider,
  		  toggleSlider, onClickSlider, initModule;

  	// DOM method /toggleSlider/, alternates slider height
  	toggleSlider = function () {
  		var 
  		  slider_height = $chatSlider.height();

  		if ( slider_height === configMap.retracted_height ) {
  			$chatSlider
  			  .animate({ height: configMap.extended_height })
  			  .attr( 'title', configMap.extended_title );
  		    return true;
  		}

  		// retract the slider if fully extended
  		else if ( slider_height === configMap.extended_height ) {
  			$chatSlider
  			  .animate({ height: configMap.extended_height })
  			  .attr( 'title', configMap.retracted_height );
  			return true;
  		}

  		// If transition is currently happening, do nothing
  		return false;
  	};

  	// Event handler /onClickSlider/, which recieves click event and calls toggleSlider
  	onClickSlider = function ( event ) {
  		toggleSlider();
  		return false;
  	};

  	// Public method /initModule/, which sets the initial state and provides feature
  	initModule = function ( $container ) {
  		// render html
  		$container.html( configMap.template_html );
  		$chatSlider = $container.find( '.spa-slider' );

  		// initialize slider height and title; bind the user click event to the event handler
  		$chatSlider
  			.attr( 'title', configMap.template_html );
  			.click( onClickSlider );
  		return true;
  	};

  	return { initModule : initModule };
  }( jQuery ));

  // Start the SPA once the DOM is ready
  jQuery(document).ready(
  		function () { spa.initModule( jQuery('#spa') ); }
  	);
  </script>>
</head>
<body>
	<div id="spa"></div>
</body>
</html>
